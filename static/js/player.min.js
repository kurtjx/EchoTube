/*
 * youtube player
 * Copyright (c) 2010 Richard Willis
 * http://badyntax.co.uk
 */
(function(b){b.fn.player=function(a){return this.each(function(){b(this).data("player",new f(this,a))})};var f=function(a,c){this.options=b.extend({width:425,height:356,swfobject:window.swfobject||false,playlist:[],trackNumber:0},c||{});this.$player=b(a);this.ytplayer=this.$player.find("#player-object").get(0);this.init()};f.prototype={init:function(){this.options.trackNumber=Math.floor(Math.random()*this.options.playlist.length);this.createElements()},createElements:function(){this.createPlayer().createToolbar().createInfobar()}, createPlayer:function(){var a={allowScriptAccess:"always"};this.options.swfobject&&this.options.swfobject.embedSWF("http://www.youtube.com/apiplayer?enablejsapi=1&version=3&playerapiid=ytplayer&hd=1&showinfo=0",this.ytplayer.id,this.options.width,this.options.height,"8",null,null,a);return this},createToolbar:function(){var a=this;this.toolbar={container:b('<ul id="player-toolbar" class="ui-widget ui-helper-clearfix ui-widget-header ui-corner-all"></ul>'),buttons:{play:{text:"Play",classname:"ui-icon-play", action:function(d){d.playVideo()}},pause:{text:"Pause",classname:"ui-icon-pause",action:function(d){d.pauseVideo()}},prev:{text:"Prev",classname:"ui-icon-seek-prev",action:function(d,e){if(a.options.trackNumber>0){a.options.trackNumber--;a.loadVideo();a.toolbar.buttons.play.obj.addClass("ui-state-active")}b(e).removeClass("ui-state-active")}},next:{text:"Next",classname:"ui-icon-seek-next",action:function(d,e){if(a.options.trackNumber<a.options.playlist.length-1){a.options.trackNumber++;a.loadVideo(); a.toolbar.buttons.play.obj.addClass("ui-state-active")}b(e).removeClass("ui-state-active")}},volume:{text:"Volume",classname:"ui-icon-volume-on",action:function(){}}}};for(var c in this.toolbar.buttons){this.toolbar.buttons[c].obj=b('<li class="ui-state-default ui-corner-all"></li>').append('<span class="ui-icon '+this.toolbar.buttons[c].classname+'"></span></li>').attr("title",this.toolbar.buttons[c].text).data("button",this.toolbar.buttons[c]).hover(function(){b(this).addClass("ui-state-hover")}, function(){b(this).removeClass("ui-state-hover")}).click(function(){a.toolbar.container.find(".ui-state-active").removeClass("ui-state-active");b(this).addClass("ui-state-active").data("button").action(a.ytplayer,this)});this.toolbar.container.append(this.toolbar.buttons[c].obj)}this.$player.find("#player-video").after(this.toolbar.container);return this},createInfobar:function(){this.infobar=b('<div id="player-infobar"></div>');this.toolbar.container.after(this.infobar)},onReady:function(){this.ytplayer= this.$player.find("object:first").get(0);this.toolbar.container.fadeIn(400);this.cueVideo()},updateInfo:function(){this.infobar.hide().html(this.options.playlist[this.options.trackNumber].title).fadeIn(400)},cueVideo:function(a){this.ytplayer.cueVideoById(a||this.options.playlist[this.options.trackNumber].id,0);this.updateInfo()},loadVideo:function(a){this.ytplayer.loadVideoById(a||this.options.playlist[this.options.trackNumber].id,0);this.updateInfo()}}})(jQuery);
